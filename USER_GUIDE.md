# Solana DEX 매집 지갑 탐지 시스템 - 사용자 매뉴얼

## 1. 시작하기

### 1.1 환경 설정
1. Python 3.8 이상 설치
2. 가상환경 생성 및 활성화
```bash
python -m venv venv
source venv/bin/activate  # Mac/Linux
# 또는
.\venv\Scripts\activate  # Windows
```

3. 필요한 패키지 설치
```bash
pip install -r requirements.txt
```

4. `.env` 파일 설정
```env
BIRDEYE_API_KEY=your_birdeye_api_key_here
HELIUS_API_KEY=your_helius_api_key_here
MONGODB_URI=mongodb://localhost:27017
```

### 1.2 서버 실행
```bash
python main.py
```

## 2. 토큰 분석하기

### 2.1 토큰 주소 찾기
1. Birdeye 웹사이트(https://birdeye.so) 접속
2. 분석하고 싶은 토큰 검색
3. 토큰 상세 페이지에서 주소 복사

### 2.2 분석 실행
1. 브라우저에서 `http://localhost:8000/docs` 접속
2. `/analyze/{token_address}` 엔드포인트 선택
3. "Try it out" 버튼 클릭
4. 복사한 토큰 주소 입력
5. "Execute" 버튼 클릭

### 2.3 결과 확인
분석 결과는 다음과 같은 형식으로 표시됩니다:
```json
{
  "token": "토큰주소",
  "snapshot_time": "분석시간",
  "buyers_by_sol_range": {
    "0_1": {
      "wallets": ["지갑주소1", "지갑주소2"],
      "count": 2,
      "total_sol": 0.87
    },
    "1_5": {
      "wallets": ["지갑주소3", "지갑주소4"],
      "count": 2,
      "total_sol": 3.9
    },
    "5_10": {
      "wallets": ["지갑주소5"],
      "count": 1,
      "total_sol": 6.1
    }
  }
}
```

## 3. 결과 해석

### 3.1 SOL 구간별 의미
- `0_1`: 0~1 SOL 매수 지갑
- `1_5`: 1~5 SOL 매수 지갑
- `5_10`: 5~10 SOL 매수 지갑
- `10_plus`: 10 SOL 이상 매수 지갑

### 3.2 각 구간별 정보
- `wallets`: 해당 구간의 매수자 지갑 주소 목록
- `count`: 해당 구간의 매수자 수
- `total_sol`: 해당 구간의 총 매수 금액 (SOL)

## 4. 주의사항

1. API 키 관리
   - `.env` 파일은 절대 Git에 커밋하지 마세요
   - API 키는 안전하게 보관하세요

2. 분석 제한
   - 기본적으로 최근 100개의 트랜잭션을 분석합니다
   - `limit` 파라미터로 분석할 트랜잭션 수를 조절할 수 있습니다

3. 에러 처리
   - 잘못된 토큰 주소 입력 시 400 에러
   - API 키 미설정 시 401 에러
   - 서버 오류 시 500 에러

## 5. 문제 해결

1. 서버가 실행되지 않는 경우
   - Python 버전이 3.8 이상인지 확인
   - 가상환경이 활성화되어 있는지 확인
   - 필요한 패키지가 모두 설치되어 있는지 확인

2. API 호출 실패 시
   - API 키가 올바르게 설정되어 있는지 확인
   - 인터넷 연결 상태 확인
   - API 호출 제한에 걸리지 않았는지 확인

3. 결과가 비어있는 경우
   - 입력한 토큰 주소가 올바른지 확인
   - 해당 토큰에 WSOL 매수 트랜잭션이 있는지 확인
   - 분석 기간을 늘려서 시도 

## 6. 데이터 분석 과정

### 6.1 데이터 수집
1. Birdeye API를 통한 트랜잭션 수집
   - 입력된 토큰 주소의 최근 트랜잭션 시그니처 수집
   - 기본적으로 최근 100개의 트랜잭션 분석
   - `limit` 파라미터로 분석할 트랜잭션 수 조절 가능

2. Helius API를 통한 트랜잭션 상세 분석
   - 각 트랜잭션의 상세 정보 조회
   - WSOL로 매수한 트랜잭션만 필터링
   - 매수자 지갑 주소와 매수 금액 추출

### 6.2 데이터 처리
1. 지갑별 매수량 집계
   - 동일 지갑의 여러 매수 트랜잭션 합산
   - SOL 단위로 변환 (1 SOL = 1,000,000,000 lamports)

2. SOL 구간별 분류
   - 0~1 SOL: 소액 매수자
   - 1~5 SOL: 중간 매수자
   - 5~10 SOL: 대형 매수자
   - 10 SOL 이상: 고래 매수자

### 6.3 분석 결과 해석

#### 6.3.1 매수자 분포 분석
```json
{
  "buyers_by_sol_range": {
    "0_1": {
      "wallets": ["지갑주소1", "지갑주소2"],
      "count": 2,
      "total_sol": 0.87
    },
    "1_5": {
      "wallets": ["지갑주소3", "지갑주소4"],
      "count": 2,
      "total_sol": 3.9
    },
    "5_10": {
      "wallets": ["지갑주소5"],
      "count": 1,
      "total_sol": 6.1
    }
  }
}
```

- 각 구간별 매수자 수와 총 매수량을 통해 매수 세력의 분포 파악 가능
- 고래 지갑의 존재 여부와 매수 규모 확인
- 소액/중간/대형 매수자의 비율 분석

#### 6.3.2 주요 지표
1. 매수자 다양성
   - 전체 매수자 수
   - 구간별 매수자 수 비율
   - 고래 지갑의 존재 여부

2. 매수 규모
   - 구간별 총 매수량
   - 평균 매수 금액
   - 최대 매수 금액

3. 매수 패턴
   - 소액 매수자 vs 대형 매수자 비율
   - 매수 세력의 집중도
   - 고래 지갑의 영향력

### 6.4 분석 활용 방안

1. 투자 의사결정
   - 매수 세력의 강도 파악
   - 고래 지갑의 존재 여부 확인
   - 매수자 다양성 평가

2. 시장 분석
   - 매수자 분포를 통한 시장 동향 파악
   - 고래 지갑의 매수 패턴 분석
   - 소액/대형 매수자 비율 변화 추적

3. 리스크 평가
   - 고래 지갑의 영향력 평가
   - 매수 세력의 집중도 분석
   - 시장 조작 가능성 판단

### 6.5 주의사항
1. 데이터 신뢰성
   - API 호출 제한 고려
   - 트랜잭션 수집 기간의 적절성
   - 데이터 누락 가능성

2. 분석 한계
   - 과거 데이터 기반 분석
   - 실시간 시장 변화 반영 제한
   - 매도 트랜잭션 미포함

3. 해석 주의점
   - 매수자 수와 매수량의 상관관계
   - 고래 지갑의 실제 영향력
   - 시장 상황에 따른 해석 차이 